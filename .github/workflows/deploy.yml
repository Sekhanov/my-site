# Name of the workflow (shown in the GitHub Actions UI)
name: Deploy to GitHub Pages

# When this workflow should run
on:
  push:
    # Trigger the workflow only when pushing to the main branch
    branches: ["main"]

# Permissions required by GitHub Pages deployment
permissions:
  contents: read      # Allows the workflow to read repository contents
  pages: write        # Allows publishing to GitHub Pages
  id-token: write     # Required for secure authentication with GitHub Pages

# Prevent multiple deployments from running at the same time
concurrency:
  group: "pages"              # Group name for concurrency control
  cancel-in-progress: true    # Cancel previous runs if a new push happens

jobs:
  # Single job called "deploy"
  deploy:
    # Use the latest Ubuntu runner provided by GitHub
    runs-on: ubuntu-latest

    steps:
      # Step 1: Checkout the repository code
      - name: Checkout
        uses: actions/checkout@v4
        # This pulls your repository files into the runner

      # Step 2: Configure GitHub Pages environment
      - name: Setup Pages
        uses: actions/configure-pages@v5
        # Sets up environment variables and Pages configuration

      # Step 3: Upload site files as an artifact
      - name: Upload artifact
        uses: actions/upload-pages-artifact@v3
        with:
          path: .
          # "." means: upload everything from the repository root
          # This is where your index.html lives

      # Step 4: Deploy the uploaded artifact to GitHub Pages
      - name: Deploy
        uses: actions/deploy-pages@v4
        # Takes the uploaded artifact and publishes it live
